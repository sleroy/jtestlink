<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout">
<body>
 <!-- Main -->
 <div class="content" layout:fragment="content">
  <!-- content -->
  <div class="row">
   <!-- main col left -->
   <div class="col-sm-12">
    <div class="panel panel-default">
     <div class="panel-heading">
      <h4>Applications</h4>
      <i>Click on a application below to view or edit details. Click 'Add Application' to add a product</i>
     </div>
     <nav class="navbar navbar-default navbar-static-top" role="navigation">
     <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
       <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
       </button>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
       <div class="btn-compose pull-left">
        <a type="button" href="/ui/products/add" th:if="${#httpServletRequest.isUserInRole('ROLE_ADMIN')}" class="btn btn-danger navbar-btn"> <span class="glyphicon glyphicon-pencil"></span> Create a new Application
        </a>
       </div>
      </div>
      <!-- /.navbar-collapse -->
     </div>
     <!-- /.container-fluid --> </nav>
     <div class="table-responsive">
      <table id="users" class="table table-hover table-striped" cellspacing="0" width="100%">
       <thead>
        <tr>
         <th></th>
         <th>Identifier</th>
         <th>Name</th>
         <th>Status</th>
         <th>Edit</th>
         <th>Delete</th>
        </tr>
       </thead>
       <tr th:each="application : ${applications}" th:attr="data-id=${application.key}" th:class="${application.isActive() ? '' : 'warning'}">
        <td><img th:src="@{${application.image}}" class="media-object" /></td>
        <td><a data-toggle="tooltip" title="Go to the project dashboard" th:href="@{'/ui/application/edit/' + ${application.id}}" th:text="${application.key}">key</a></td>
        <td th:text="${application.name}">Name</td>
        <td th:text="${application.status}">Status</td>
        <td><a th:href="@{'/ui/application/edit/' + ${application.id}}" data-placement="top" data-toggle="tooltip" title="Edit">
          <button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit">
           <span class="glyphicon glyphicon-pencil"></span>
          </button>
        </a></td>
        <td class="warning"><p data-placement="top" data-toggle="tooltip" title="Delete">
          <button class="btn btn-danger btn-xs appDelete" data-title="Delete">
           <span class="glyphicon glyphicon-trash"></span>
          </button>
         </p></td>
       </tr>
       <tfoot>
        <tr>
         <th></th>
         <th>Identifier</th>
         <th>Name</th>
         <th>Status</th>
         <th>Edit</th>
         <th>Delete</th>
        </tr>
       </tfoot>
      </table>
      <!-- include modal deletion -->
      <div th:replace="modal :: deleteModal"></div>
     </div>
    </div>
   </div>
  </div>
 </div>
 <!--/row-->
 <div layout:fragment="footer">
  <script type="text/javascript" src="../../static/js/modules/users.js" th:src="@{/js/modules/users.js}"></script>
  <script type="text/javascript">
			$(document).ready(userTable);
		</script>
 </div>
</body>
</html>